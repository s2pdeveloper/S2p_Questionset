"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[313],{2313:(x,m,r)=>{r.r(m),r.d(m,{TagModule:()=>k});var p=r(6814),s=r(95),t=r(5879),g=r(1076),h=r(5e3),v=r(485),b=r(4087),Z=r(1326),C=r(6593);function A(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"span",30),t.NdJ("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.openUrl(n.url))}),t._UZ(1,"i",31),t.qZA()}}let y=(()=>{class o{constructor(e,i,n,a,c,u,q){this.router=e,this.activated=i,this.tagservice=n,this.toastService=a,this.spinner=c,this.validationService=u,this.domSanitizer=q,this.submitted=!1,this.tagId=null,this.fileName="",this.url=null,this.file=null,this.FORM_ERRORS=[{message:"Title is required",key:"title"},{message:"Status is required",key:"status"}],this.tagForm=new s.cw({_id:new s.NI(null),title:new s.NI("",[s.kI.required]),tag:new s.NI(""),status:new s.NI("active",[s.kI.required])})}ngOnInit(){this.activated.queryParams.subscribe(e=>{e.id&&(this.getdataById(e.id),this.tagId=e.id)})}navigateTo(e){this.router.navigate([e])}reset(){this.tagForm.reset(),this.tagId&&this.getdataById(this.tagId)}submit(){if(this.submitted=!0,this.validationService.checkErrors(this.tagForm,this.FORM_ERRORS))return;let e=this.tagForm.value,i=new FormData;i.append("key","tag"),i.append("title",e.title),i.append("status",e.status),this.file&&i.append("file",this.file),e._id?this.update(e._id,i):this.create(i)}update(e,i){this.spinner.show(),this.tagservice.updateTagById(e,i).subscribe(n=>{this.spinner.hide(),this.toastService.success(n.message),this.router.navigate(["default/tag/tag-list"])})}getdataById(e){this.spinner.show(),this.tagservice.getbyId(e).subscribe(i=>{this.url=i.image,this.tagForm.patchValue(i),this.spinner.hide()})}create(e){this.spinner.show(),this.tagservice.createTag(e).subscribe(i=>{this.spinner.hide(),this.toastService.success(i.message),this.router.navigate(["default/tag/tag-list"])})}openUrl(e){console.log("url",e),window.open(e,"_blank")}fileChosen(e){if(e.target.files.length){if(e.target.files[0].size>2e6)return void this.toastService.warning("Unable to upload file of size more than 1MB");this.file=e.target.files[0],this.fileName=this.file.name;const n=new FileReader;n.readAsDataURL(this.file),n.onload=()=>{this.url=this.domSanitizer.bypassSecurityTrustUrl(n.result)},n.onerror=a=>{console.error(a)}}}back(){this.router.navigate(["default/tag/tag-list"])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.F0),t.Y36(g.gz),t.Y36(h.c),t.Y36(v.k),t.Y36(b.V),t.Y36(Z.R),t.Y36(C.H7))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tag-form"]],decls:53,vars:8,consts:[[1,"container-fluid"],[1,"row","my-4"],[1,"col-12"],[1,"d-flex","justify-content-center"],[1,"card","form-card"],[1,"card-header"],[1,"card-header-items"],[1,"ms-2"],[1,"back-btn","btn","btn-primary",3,"click"],[1,"ti","ti-arrow-left","me-1"],[1,"card-body","p-2"],[3,"formGroup"],[1,"row"],[1,"col-md-6","mb-2"],[1,"form-label","fw-bold"],[1,"text-danger"],["formControlName","title","placeholder","Title","type","text",1,"form-control"],[1,"col-md-6","mb-2","position-relative"],[1,"input-group"],["formControlName","tag","placeholder","image","type","file","accept",".png,.jpeg,.jpg,.pdf,.svg",1,"form-control",3,"change"],[1,"input-group-append"],["class","input-group-text h-100","id","inputGroup-sizing-sm",3,"click",4,"ngIf"],["formControlName","status",1,"form-control"],["value","active"],["value","inactive"],[1,"d-flex","justify-content-center","mt-3","pt-3"],["type","submit",1,"btn","px-5","btn-success","shadow","rounded","rounded-3","mx-2","d-flex","align-items-center",3,"click"],[1,"fa-solid","me-2"],["type","submit",1,"btn","px-5","btn-primary","mx-2","shadow","rounded","rounded-3","d-flex","align-items-center",3,"click"],[1,"fa-solid","fa-arrows-rotate","me-2"],["id","inputGroup-sizing-sm",1,"input-group-text","h-100",3,"click"],[1,"fa","fa-eye"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),t._uU(8),t.qZA(),t.TgZ(9,"div")(10,"a",8),t.NdJ("click",function(){return i.navigateTo("/default/tag/tag-list")}),t._UZ(11,"i",9),t._uU(12," Back"),t.qZA()()()(),t.TgZ(13,"div",10)(14,"form",11)(15,"div",12)(16,"div",13)(17,"label",14),t._uU(18,"Title "),t.TgZ(19,"span",15),t._uU(20,"*"),t.qZA()(),t._UZ(21,"input",16)(22,"div"),t.qZA(),t.TgZ(23,"div",17)(24,"label",14),t._uU(25,"Image"),t.TgZ(26,"span",15),t._uU(27,"*"),t.qZA()(),t.TgZ(28,"div",18)(29,"input",19),t.NdJ("change",function(a){return i.fileChosen(a)}),t.qZA(),t.TgZ(30,"div",20),t.YNc(31,A,2,0,"span",21),t.qZA()(),t._UZ(32,"div"),t.qZA(),t.TgZ(33,"div",13)(34,"label",14),t._uU(35,"Status"),t.TgZ(36,"span",15),t._uU(37,"*"),t.qZA()(),t.TgZ(38,"select",22)(39,"option",23),t._uU(40,"Active"),t.qZA(),t.TgZ(41,"option",24),t._uU(42,"InActive"),t.qZA()(),t._UZ(43,"div"),t.qZA()(),t.TgZ(44,"div",12)(45,"div",2)(46,"div",25)(47,"button",26),t.NdJ("click",function(){return i.submit()}),t._UZ(48,"i",27),t._uU(49),t.qZA(),t.TgZ(50,"button",28),t.NdJ("click",function(){return i.reset()}),t._UZ(51,"i",29),t._uU(52," Reset "),t.qZA()()()()()()()()()()()),2&e&&(t.xp6(8),t.hij("",i.tagId?"Update":"Create"," Tag"),t.xp6(6),t.Q6J("formGroup",i.tagForm),t.xp6(17),t.Q6J("ngIf",i.url),t.xp6(16),t.Tol(i.tagId?"btn-warning":"btn-success"),t.xp6(1),t.Tol(i.tagId?"fa-pen-to-square":"fa-plus"),t.xp6(1),t.hij(" ",i.tagId?"Update":"Create"," "))},dependencies:[p.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u],styles:[".form-card[_ngcontent-%COMP%], .view-card[_ngcontent-%COMP%]{min-height:50vh}.pt-3[_ngcontent-%COMP%]{padding-top:3rem!important}"]}),o})();var d=r(2030),_=r(8672),f=r(9229),T=r(7741);function U(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"div",33)(1,"button",34),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.dismiss("Cross click"))}),t.qZA()(),t.TgZ(2,"div",35)(3,"h4",36),t._uU(4," Are you sure you want to Delete ? "),t.qZA()(),t.TgZ(5,"div",37)(6,"button",38),t.NdJ("click",function(){t.CHM(e);const n=t.oxw().$implicit,a=t.oxw();return t.KtG(a.delete(n.id))}),t._uU(7," YES "),t.qZA(),t.TgZ(8,"button",39),t.NdJ("click",function(){const a=t.CHM(e).$implicit;return t.KtG(a.dismiss("Cross click"))}),t._uU(9," NO "),t.qZA()()}}function S(o,l){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td",25),t._uU(2),t.qZA(),t.TgZ(3,"td",25),t._UZ(4,"img",26),t.qZA(),t.TgZ(5,"td",25),t._uU(6),t.qZA(),t.TgZ(7,"td",25),t._uU(8),t.qZA(),t.TgZ(9,"td",27)(10,"button",28),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.updateTag(a))}),t._UZ(11,"i",29),t.qZA(),t.TgZ(12,"button",30),t.NdJ("click",function(){const a=t.CHM(e).$implicit,c=t.MAs(15),u=t.oxw();return t.KtG(u.open(a.id,c))}),t._UZ(13,"i",31),t.qZA()(),t.YNc(14,U,10,0,"ng-template",null,32,t.W1O),t.qZA()}if(2&o){const e=l.$implicit,i=l.index;t.xp6(2),t.Oqu(i+1),t.xp6(2),t.Q6J("src",e.image,t.LSH),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Oqu(e.status)}}const F=[{path:"",redirectTo:"tag-list",pathMatch:"full"},{path:"tag-form",component:y},{path:"tag-list",component:(()=>{class o{constructor(e,i,n,a){this.router=e,this.tagservice=i,this.spinner=n,this.toastService=a,this.modalService=(0,t.f3M)(d.FF),this.page=1,this.pageSize=8,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.Tag=[]}ngOnInit(){this.getAll()}add(){this.router.navigate(["/default/tag/tag-form"])}updateTag(e){this.router.navigate(["/default/tag/tag-form"],{queryParams:{id:e._id}})}onChangePage(e){e>0&&(this.page=e),this.getAll()}open(e,i){this.selectedRow=e,this.modalService.open(i,{centered:!0})}searchFn(){console.log("this.search",this.search),(this.search.toString().length>=3||0==this.search.toString().length)&&this.getAll()}getAll(){this.spinner.show(),this.tagservice.getAllTag({page:this.page,pageSize:this.pageSize,search:this.search}).subscribe(i=>{this.spinner.hide(),console.log("success",i),this.Tag=i.data})}delete(e){this.spinner.show(),this.tagservice.deleteTagById(e).subscribe(i=>{console.log(i),this.spinner.hide(),this.toastService.success(i.message),this.modalService.dismissAll(),this.getAll()},i=>{console.log(i),this.spinner.hide(),this.toastService.error("Unable to Delete !")})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.F0),t.Y36(h.c),t.Y36(_.t2),t.Y36(f._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-tag-list"]],decls:36,vars:5,consts:[[1,"container-fluid","table-container"],[1,"card","table-card"],[1,"card-title"],[1,"card-header"],[1,"row","justify-content-between"],[1,"col-4"],[1,"container","input-icons"],[1,"input-group","input-group-sm"],["type","search","aria-label","Small","placeholder","Search","aria-describedby","inputGroup-sizing-sm",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"input-group-append"],["id","inputGroup-sizing-sm",1,"input-group-text","h-100"],[1,"ti","ti-search"],[1,"col-md-4","col-3","text-right"],[1,"btn","add-btn",3,"click"],[1,"ti","ti-plus","me-1"],[1,"card-body","p-4"],[1,"table-responsive"],[1,"table","table-hover"],[1,"thead"],[1,"table-secondary"],["scope","col"],["scope","col",1,"mx-auto","text-center"],[1,"tbody","mt-3"],[4,"ngFor","ngForOf"],[3,"page","pageSize","collection","pageChange","pageSizeChange","collectionChange","myOutput"],["scope","row"],["height","30","width","30",3,"src"],["scope","row",1,"text-center"],["ngbTooltip","Update",1,"btn","btn-sm","status-btn","mx-2",3,"click"],[1,"ti","ti-edit-circle"],["ngbTooltip","Delete",1,"btn","btn-sm","status-btn",3,"click"],[1,"ti","ti-trash"],["deleteModal",""],[1,"modal-header","border-0"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","border-0"],["id","modal-basic-title",1,"modal-title","text-center"],[1,"modal-footer","justify-content-center","border-0"],["type","button",1,"btn","px-4","btn-outline-danger",3,"click"],["type","button",1,"btn","px-4","btn-outline-primary",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),t._uU(4,"Tag List"),t.qZA()(),t.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"input",8),t.NdJ("ngModelChange",function(a){return i.search=a})("input",function(){return i.searchFn()}),t.qZA(),t.TgZ(11,"div",9)(12,"span",10),t._UZ(13,"i",11),t.qZA()()()()(),t.TgZ(14,"div",12)(15,"button",13),t.NdJ("click",function(){return i.add()}),t._UZ(16,"i",14),t._uU(17," Add Tag "),t.qZA()()()(),t.TgZ(18,"div",15)(19,"div",16)(20,"table",17)(21,"thead",18)(22,"tr",19)(23,"th",20),t._uU(24,"Sr. No."),t.qZA(),t.TgZ(25,"th",20),t._uU(26,"Image"),t.qZA(),t.TgZ(27,"th",20),t._uU(28,"Title"),t.qZA(),t.TgZ(29,"th",20),t._uU(30,"Status"),t.qZA(),t.TgZ(31,"th",21),t._uU(32,"Action"),t.qZA()()(),t.TgZ(33,"tbody",22),t.YNc(34,S,16,4,"tr",23),t.qZA()()(),t.TgZ(35,"app-custom-pagination",24),t.NdJ("pageChange",function(a){return i.page=a})("pageSizeChange",function(a){return i.pageSize=a})("collectionChange",function(a){return i.collection=a})("myOutput",function(){return i.onChangePage(i.page)}),t.qZA()()()()),2&e&&(t.xp6(10),t.Q6J("ngModel",i.search),t.xp6(24),t.Q6J("ngForOf",i.Tag),t.xp6(1),t.Q6J("page",i.page)("pageSize",i.pageSize)("collection",i.collection))},dependencies:[p.sg,s.Fj,s.JJ,s.On,T.W,d._L]}),o})()}];let k=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[p.ez,g.Bz.forChild(F),s.u5,s.UX,f.Rh,_.ef,T.W,d.HK]}),o})()}}]);