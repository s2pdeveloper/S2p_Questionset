"use strict";(self.webpackChunkmantis_free_version=self.webpackChunkmantis_free_version||[]).push([[642],{9642:(M,h,l)=>{l.r(h),l.d(h,{UsersModule:()=>k});var c=l(6814),p=l(1076),s=l(95),e=l(5879),d=l(2030),u=l(7398),U=l(4495);let g=(()=>{class r{constructor(t){this.http=t,this.routes={createPath:"user/register",getCompanyURLsPath:"/company/getCompanyURLs",getAllPath:"user/getAll",updatePath:i=>`user/update/${i}`,getByIdPath:i=>`user/profile/${i}`,deletePath:i=>`user/deleteById/${i}`}}createUser(t){return this.http.post(this.routes.createPath,t).pipe((0,u.U)(i=>i))}login(t){return this.http.post(this.routes.loginPath,t).pipe((0,u.U)(i=>i))}getAllUsers(t){return this.http.get(this.routes.getAllPath,t).pipe((0,u.U)(i=>i))}update(t,i){return this.http.put(this.routes.updatePath(t),i).pipe((0,u.U)(n=>n))}getById(t){return this.http.get(this.routes.getByIdPath(t)).pipe((0,u.U)(i=>i))}delete(t){return this.http.delete(this.routes.deletePath(t)).pipe((0,u.U)(i=>i))}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(U.s))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var _=l(4087),f=l(485),v=l(7741);function Z(r,a){if(1&r){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",29),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.navigateTo("/default/user/user-form",n.id))}),e._UZ(2,"i",30),e.qZA(),e.TgZ(3,"button",31),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.MAs(14),m=e.oxw();return e.KtG(m.open(n.id,o))}),e._UZ(4,"i",32),e.qZA(),e.BQk()}}function b(r,a){if(1&r){const t=e.EpF();e.TgZ(0,"div",33)(1,"button",34),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e.qZA()(),e.TgZ(2,"div",35)(3,"h4",36),e._uU(4," Are you sure you want to Delete ? "),e.qZA()(),e.TgZ(5,"div",37)(6,"button",38),e.NdJ("click",function(){e.CHM(t);const n=e.oxw().$implicit,o=e.oxw();return e.KtG(o.deleteUser(n.id))}),e._uU(7," YES "),e.qZA(),e.TgZ(8,"button",39),e.NdJ("click",function(){const o=e.CHM(t).$implicit;return e.KtG(o.dismiss("Cross click"))}),e._uU(9," NO "),e.qZA()()}}function T(r,a){if(1&r&&(e.TgZ(0,"tr")(1,"td",25),e._uU(2),e.qZA(),e.TgZ(3,"td",25),e._uU(4),e.qZA(),e.TgZ(5,"td",25),e._uU(6),e.qZA(),e.TgZ(7,"td",25),e._uU(8),e.qZA(),e.TgZ(9,"td",25),e._uU(10),e.qZA(),e.TgZ(11,"td",26),e.YNc(12,Z,5,0,"ng-container",27),e.qZA(),e.YNc(13,b,10,0,"ng-template",null,28,e.W1O),e.qZA()),2&r){const t=a.$implicit,i=a.index;e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Oqu(t.email),e.xp6(2),e.Oqu(t.userName),e.xp6(2),e.Oqu(t.phone),e.xp6(2),e.Oqu(t.role),e.xp6(2),e.Q6J("ngIf","SUPER_ADMIN"!=t.role)}}let A=(()=>{class r{constructor(t,i,n,o){this.router=t,this.userService=i,this.spinner=n,this.toastService=o,this.modalService=(0,e.f3M)(d.FF),this.page=1,this.pageSize=8,this.collection=0,this.column="createdAt",this.direction=-1,this.search="",this.users=[]}ngOnInit(){this.getAll()}navigateTo(t,i){i?this.router.navigate([t],{queryParams:{id:i}}):this.router.navigate([t])}open(t,i){this.selectedRow=t,this.modalService.open(i,{centered:!0})}searchFn(){(this.search.toString().length>=3||0==this.search.toString().length)&&this.getAll()}deleteUser(t){this.spinner.show(),this.userService.delete(t).subscribe(i=>{this.spinner.hide(),this.toastService.success(i.result.message),this.modalService.dismissAll(),this.getAll()},i=>{console.log(i),this.spinner.hide(),this.toastService.error("Unable to Delete !")})}onChangePage(t){t>0&&(this.page=t),this.getAll()}getAll(){this.spinner.show(),this.userService.getAllUsers({page:this.page,pageSize:this.pageSize,search:this.search}).subscribe(i=>{this.spinner.hide(),this.users=i.data,this.collection=i.count})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(p.F0),e.Y36(g),e.Y36(_.V),e.Y36(f.k))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-list"]],decls:38,vars:5,consts:[[1,"container-fluid","table-container"],[1,"card","table-card"],[1,"card-title"],[1,"card-header"],[1,"row","justify-content-between"],[1,"col-4"],[1,"container","input-icons"],[1,"input-group","input-group-sm"],["type","search","aria-label","Small","placeholder","Search","aria-describedby","inputGroup-sizing-sm",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"input-group-append"],["id","inputGroup-sizing-sm",1,"input-group-text","h-100"],[1,"ti","ti-search"],[1,"col-md-4","col-3","text-right"],[1,"btn","add-btn",3,"click"],[1,"ti","ti-plus","me-1"],[1,"card-body","p-4"],[1,"table-responsive"],[1,"table","table-hover"],[1,"thead"],[1,"table-secondary"],["scope","col"],["scope","col",1,"mx-auto","text-center"],[1,"tbody","mt-3"],[4,"ngFor","ngForOf"],[3,"page","pageSize","collection","pageChange","pageSizeChange","collectionChange","myOutput"],["scope","row"],["scope","row",1,"text-center"],[4,"ngIf"],["deleteModal",""],["ngbTooltip","Update",1,"btn","status-btn","btn-sm","mx-2",3,"click"],[1,"ti","ti-edit-circle"],["ngbTooltip","Delete",1,"btn","status-btn","btn-sm",3,"click"],[1,"ti","ti-trash"],[1,"modal-header","border-0"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body","border-0"],["id","modal-basic-title",1,"modal-title","text-center"],[1,"modal-footer","justify-content-center","border-0"],["type","button",1,"btn","px-4","btn-outline-danger",3,"click"],["type","button",1,"btn","px-4","btn-outline-primary",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),e._uU(4,"Users List"),e.qZA()(),e.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7)(10,"input",8),e.NdJ("ngModelChange",function(o){return i.search=o})("input",function(){return i.searchFn()}),e.qZA(),e.TgZ(11,"div",9)(12,"span",10),e._UZ(13,"i",11),e.qZA()()()()(),e.TgZ(14,"div",12)(15,"button",13),e.NdJ("click",function(){return i.navigateTo("/default/user/user-form",null)}),e._UZ(16,"i",14),e._uU(17," Add User "),e.qZA()()()(),e.TgZ(18,"div",15)(19,"div",16)(20,"table",17)(21,"thead",18)(22,"tr",19)(23,"th",20),e._uU(24,"Sr. No."),e.qZA(),e.TgZ(25,"th",20),e._uU(26,"Email"),e.qZA(),e.TgZ(27,"th",20),e._uU(28,"User Name"),e.qZA(),e.TgZ(29,"th",20),e._uU(30,"Mobile No."),e.qZA(),e.TgZ(31,"th",20),e._uU(32,"Role"),e.qZA(),e.TgZ(33,"th",21),e._uU(34,"Action"),e.qZA()()(),e.TgZ(35,"tbody",22),e.YNc(36,T,15,6,"tr",23),e.qZA()()(),e.TgZ(37,"app-custom-pagination",24),e.NdJ("pageChange",function(o){return i.page=o})("pageSizeChange",function(o){return i.pageSize=o})("collectionChange",function(o){return i.collection=o})("myOutput",function(){return i.onChangePage(i.page)}),e.qZA()()()()),2&t&&(e.xp6(10),e.Q6J("ngModel",i.search),e.xp6(26),e.Q6J("ngForOf",i.users),e.xp6(1),e.Q6J("page",i.page)("pageSize",i.pageSize)("collection",i.collection))},dependencies:[c.sg,c.O5,d._L,s.Fj,s.JJ,s.On,v.W],styles:[".addbtn[_ngcontent-%COMP%]{position:absolute;top:70px;right:10px}"]}),r})();var C=l(1326);function y(r,a){1&r&&(e.TgZ(0,"div",13)(1,"label",14),e._uU(2,"Role"),e.TgZ(3,"span",15),e._uU(4,"*"),e.qZA()(),e.TgZ(5,"select",33)(6,"option",34),e._uU(7,"Admin"),e.qZA(),e.TgZ(8,"option",35),e._uU(9,"Customer"),e.qZA()()())}function N(r,a){1&r&&(e.TgZ(0,"div",13)(1,"label",14),e._uU(2,"Password "),e.TgZ(3,"span",15),e._uU(4,"*"),e.qZA()(),e.TgZ(5,"div",21),e._UZ(6,"input",36),e.qZA()())}let q=(()=>{class r{constructor(t,i,n,o,m,S,w){this.formBuilder=t,this.router=i,this.spinner=n,this.validationService=o,this.activated=m,this.userService=S,this.toastService=w,this.submitted=!1,this.userId=null,this.userForm=new s.cw({_id:new s.NI(null),firstName:new s.NI("",[s.kI.required]),lastName:new s.NI("",[s.kI.required]),userName:new s.NI("",[s.kI.required]),email:new s.NI("",[s.kI.required]),gender:new s.NI("Male",[s.kI.required]),role:new s.NI("ADMIN",[s.kI.required]),phone:new s.NI("",[s.kI.required]),alternateMobile:new s.NI(""),password:new s.NI("",[s.kI.required])}),this.FORM_ERRORS=[{message:"First Name is Required",key:"firstName"},{message:"Last Name is Required",key:"lastName"},{message:"User Name is Required",key:"userName"},{message:"Email is Required",key:"email"},{message:"Gender is Required",key:"gender"},{message:"Role is Required",key:"role"},{message:"Password is Required",key:"password"},{message:"Phone No..0 is Required",key:"phone"}]}get f(){return this.userForm.controls}ngOnInit(){this.activated.queryParams.subscribe(t=>{null!=t.id&&(this.userId=t.id,this.getDataById(t.id))})}navigateTo(t){this.router.navigate([t])}submit(){if(console.log("this.categoryForm.value;",this.userForm.value),this.submitted=!0,this.validationService.checkErrors(this.userForm,this.FORM_ERRORS))return;let t=this.userForm.value;t._id?(delete t.password,console.log("formData",t),this.update(t)):(delete t._id,this.create(t))}create(t){this.spinner.show(),this.userService.createUser(t).subscribe(i=>{this.spinner.hide(),this.toastService.success(i.message),this.router.navigate(["default/user/user-list"])})}update(t){this.spinner.show(),this.userService.update(t._id,t).subscribe(i=>{this.spinner.hide(),this.toastService.success(i.message),this.router.navigate(["/default/user/user-list"])})}getDataById(t){this.spinner.show(),this.userService.getById(t).subscribe(i=>{this.userForm.patchValue(i),this.userForm.controls.password.setValidators(null),this.userForm.controls.password.updateValueAndValidity(),this.spinner.hide()})}reset(){this.userForm.reset(),this.userId&&this.getDataById(this.userId)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(s.qu),e.Y36(p.F0),e.Y36(_.V),e.Y36(C.R),e.Y36(p.gz),e.Y36(g),e.Y36(f.k))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-user-form"]],decls:82,vars:9,consts:[[1,"container-fluid"],[1,"row","my-4"],[1,"col-12"],[1,"d-flex","justify-content-center"],[1,"card","form-card"],[1,"card-header"],[1,"card-header-items"],[1,"ms-2"],[1,"back-btn","btn","btn-primary",3,"click"],[1,"ti","ti-arrow-left","me-1"],[1,"card-body","p-4"],[3,"formGroup"],[1,"row"],[1,"col-md-6","mb-2"],[1,"form-label","fw-bold"],[1,"text-danger"],["formControlName","firstName","placeholder","First Name","type","text",1,"form-control"],["formControlName","lastName","placeholder","Last Name","type","text",1,"form-control"],["formControlName","userName","placeholder","User Name","type","text",1,"form-control"],["formControlName","email","placeholder","Email","type","text",1,"form-control"],["formControlName","phone","placeholder","Mobile","type","text",1,"form-control"],[1,"input-group"],["type","number","formControlName","alternateMobile","placeholder","Alternate Mobile",1,"input","form-control","input-inner-shadow"],["class","col-md-6 mb-2",4,"ngIf"],["placeholder","Gender","formControlName","gender","aria-label","Default select example",1,"form-select"],["value","Male"],["value","Female"],["value","Other"],[1,"d-flex","justify-content-center","mt-3","pt-3"],["type","submit",1,"btn","reset-btn","btn-primary",3,"click"],[1,"fa-solid","fa-arrows-rotate","me-2"],["type","submit",1,"btn","submit-btn",3,"click"],[1,"fa-solid","me-2"],["formControlName","role",1,"form-select"],["value","ADMIN"],["value","CUSTOMER"],["type","password","formControlName","password","placeholder","Password",1,"input","form-control","input-inner-shadow"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),e._uU(8),e.qZA(),e.TgZ(9,"div")(10,"a",8),e.NdJ("click",function(){return i.navigateTo("/default/user/user-list")}),e._UZ(11,"i",9),e._uU(12," Back"),e.qZA()()()(),e.TgZ(13,"div",10)(14,"form",11)(15,"div",12)(16,"div",13)(17,"label",14),e._uU(18,"First Name "),e.TgZ(19,"span",15),e._uU(20,"*"),e.qZA()(),e._UZ(21,"input",16)(22,"div"),e.qZA(),e.TgZ(23,"div",13)(24,"label",14),e._uU(25,"Last Name "),e.TgZ(26,"span",15),e._uU(27,"*"),e.qZA()(),e._UZ(28,"input",17),e.qZA()(),e.TgZ(29,"div",12)(30,"div",13)(31,"label",14),e._uU(32,"User Name "),e.TgZ(33,"span",15),e._uU(34,"*"),e.qZA()(),e._UZ(35,"input",18)(36,"div"),e.qZA(),e.TgZ(37,"div",13)(38,"label",14),e._uU(39,"Email "),e.TgZ(40,"span",15),e._uU(41,"*"),e.qZA()(),e._UZ(42,"input",19)(43,"div"),e.qZA()(),e.TgZ(44,"div",12)(45,"div",13)(46,"label",14),e._uU(47,"Mobile Number "),e.TgZ(48,"span",15),e._uU(49,"*"),e.qZA()(),e._UZ(50,"input",20)(51,"div"),e.qZA(),e.TgZ(52,"div",13)(53,"label",14),e._uU(54,"Alternate Mobile"),e.qZA(),e.TgZ(55,"div",21),e._UZ(56,"input",22),e.qZA()()(),e.TgZ(57,"div",12),e.YNc(58,y,10,0,"div",23),e.TgZ(59,"div",13)(60,"label",14),e._uU(61,"Gender"),e.TgZ(62,"span",15),e._uU(63,"*"),e.qZA()(),e.TgZ(64,"select",24)(65,"option",25),e._uU(66,"Male"),e.qZA(),e.TgZ(67,"option",26),e._uU(68,"Female"),e.qZA(),e.TgZ(69,"option",27),e._uU(70,"Other"),e.qZA()()()(),e.TgZ(71,"div",12),e.YNc(72,N,7,0,"div",23),e.TgZ(73,"div",12)(74,"div",2)(75,"div",28)(76,"button",29),e.NdJ("click",function(){return i.reset()}),e._UZ(77,"i",30),e._uU(78," Reset "),e.qZA(),e.TgZ(79,"button",31),e.NdJ("click",function(){return i.submit()}),e._UZ(80,"i",32),e._uU(81),e.qZA()()()()()()()()()()()()),2&t&&(e.xp6(8),e.hij("",i.userId?"Update":"Create"," User"),e.xp6(6),e.Q6J("formGroup",i.userForm),e.xp6(44),e.Q6J("ngIf",!i.userId),e.xp6(14),e.Q6J("ngIf",!i.userId),e.xp6(7),e.Tol(i.userId?"btn-warning":"btn-success"),e.xp6(1),e.Tol(i.userId?"fa-pen-to-square":"fa-plus"),e.xp6(1),e.hij(" ",i.userId?"Update":"Create"," "))},dependencies:[c.O5,s._Y,s.YN,s.Kr,s.Fj,s.wV,s.EJ,s.JJ,s.JL,s.sg,s.u],encapsulation:2}),r})();var I=l(8672);const F=[{path:"",redirectTo:"user-list",pathMatch:"full"},{path:"user-list",component:A},{path:"user-form",component:q}];let k=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[c.ez,d.HK,I.ef,p.Bz.forChild(F),s.u5,s.UX,v.W]}),r})()}}]);